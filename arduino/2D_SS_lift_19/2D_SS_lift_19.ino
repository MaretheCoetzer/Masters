// HOW TO:
// ------------------------------
// Serial input = 2 -> Steps through gait sequence once and stops at the end.
// Serial input = 1 -> Steps through gait sequence in a loop.
// Serial input = 0 -> Stops infinite loop at the node where it is at that moment

//Gait template
#include <Wire.h>
#include <Adafruit_PWMServoDriver.h>

Adafruit_PWMServoDriver pca9685 = Adafruit_PWMServoDriver();

#define SERVO_FREQ 300
#define SER0 0 //Hip 1
#define SER1 1 //Knee 1
#define SER2 2 //Hip 2
#define SER3 3 //Knee 2
#define SER4 4 //Hip 3
#define SER5 5 //Knee 3
#define SER6 6 //Hip 4
#define SER7 7 //Knee 4

// 4cm forward, 3.77 cm to the left and turned 16 degrees to the left

// Insert servo angles here:
// For 3D gaits, these angles are obtained from linearisation.py
// For 2D gaits, these angles are obtained from 2D_trajectory_reader.py
float SS_servo0[] = {-0.19868828, -0.18974597, -0.18727953, -0.18301514, -0.16997153, -0.15589857, -0.1418256 , -0.12701444, -0.11196618, -0.09691791, -0.08186964, -0.06682138, -0.05177311, -0.03672484, -0.02167658, -0.00662831,  0.00804551,  0.01810785,  0.02817018,  0.03823252,  0.04829485,  0.05835718,  0.06841952,  0.0783092 ,  0.08928351,  0.10668141,  0.13087893,  0.1574329 ,  0.18372175,  0.20691479,  0.22946532,  0.22312877,  0.21377924,  0.2052163 ,  0.19731674,  0.19168448,  0.18626106,  0.17883608,  0.16825553,  0.15865545,  0.15038856,  0.1501237 ,  0.14887127,  0.14211628,  0.13536129,  0.1286063 ,  0.12261348,  0.11854441,  0.11447534,  0.11040628,  0.10633721,  0.10226814,  0.09819907,  0.09413001,  0.09006094,  0.08599187,  0.08192281,  0.07785374,  0.07378467,  0.0697156 ,  0.06341402,  0.05430693,  0.04519983,  0.03609273,  0.02698564,  0.01787854,  0.00877145, -0.00033565, -0.00944274, -0.01854984, -0.0298882 , -0.03964588, -0.0522757 , -0.06398166, -0.08204739, -0.10774241, -0.14015965, -0.17775678, -0.2000917 , -0.19969315, -0.19090187, -0.18533757, -0.18152231, -0.17760905, -0.17296967, -0.1655877 , -0.15543254, -0.14645222, -0.13834642, -0.13240119, -0.13105088, -0.12970057, -0.12835026, -0.12699995, -0.12564964, -0.12429933, -0.12294902, -0.12447693, -0.12742342, -0.13036991, -0.1333164 , -0.1362629 , -0.13918201, -0.14192253, -0.14499766, -0.14946994, -0.15794183, -0.169427  , -0.18616259};
float SS_servo1[] = { 0.16814674,  0.13871318,  0.11587719,  0.09292682,  0.05688125,  0.01865789, -0.01956547, -0.03062074, -0.03294937, -0.035278  , -0.03760663, -0.03993526, -0.04226389, -0.04459252, -0.04692115, -0.04924978, -0.04856162, -0.01071973,  0.02712217,  0.06496407,  0.10280597,  0.14064786,  0.17848976,  0.21689242,  0.24941948,  0.25698088,  0.24053917,  0.21249631,  0.18116312,  0.15218034,  0.12069357,  0.11464122,  0.11544358,  0.1122021 ,  0.11315596,  0.11339437,  0.11425623,  0.11808704,  0.12524156,  0.1318262 ,  0.13573469,  0.12297015,  0.11079019,  0.10815417,  0.10551814,  0.10288212,  0.09994102,  0.09622986,  0.09251871,  0.08880755,  0.0850964 ,  0.08138524,  0.07767409,  0.07396294,  0.07025178,  0.06654063,  0.06282947,  0.05911832,  0.05540716,  0.05169601,  0.05125156,  0.05491226,  0.05857296,  0.06223366,  0.06589435,  0.06955505,  0.07321575,  0.07687645,  0.08053715,  0.08419784,  0.09019498,  0.09563123,  0.10505751,  0.1158546 ,  0.13809757,  0.17581083,  0.22860085,  0.29199097,  0.32507795,  0.30879424,  0.28417189,  0.26787155,  0.25597898,  0.24418608,  0.23049287,  0.20975996,  0.1837055 ,  0.16016753,  0.13838192,  0.12169354,  0.11584554,  0.10999754,  0.10414954,  0.09830154,  0.09245354,  0.08660554,  0.08075754,  0.08145626,  0.08538162,  0.08930699,  0.09323235,  0.09715771,  0.10065791,  0.10238986,  0.1052148 ,  0.11015717,  0.12038307,  0.1355583 ,  0.1570947 };
float SS_servo2[] = {-0.05025384, -0.04547684, -0.03475988, -0.01707824, -0.01718162, -0.02222803, -0.02727444, -0.03028301, -0.03263701, -0.03499101, -0.03734501, -0.03969901, -0.04205301, -0.04440701, -0.04676101, -0.049115  , -0.05208822, -0.06268751, -0.0732868 , -0.08388609, -0.09448538, -0.10508467, -0.11568396, -0.12674272, -0.14640763, -0.1690711 , -0.19669824, -0.22982256, -0.26584154, -0.30835133, -0.34191067, -0.35376487, -0.34842616, -0.3404131 , -0.33142624, -0.32294184, -0.31420649, -0.30415186, -0.29116442, -0.27578508, -0.25881408, -0.23903917, -0.22426806, -0.2079422 , -0.19161633, -0.17529046, -0.1629154 , -0.16051245, -0.1581095 , -0.15570655, -0.1533036 , -0.15090065, -0.1484977 , -0.14609475, -0.1436918 , -0.14128885, -0.13888591, -0.13648296, -0.13408001, -0.13167706, -0.13247355, -0.13729066, -0.14210777, -0.14692488, -0.15174199, -0.1565591 , -0.16137621, -0.16619332, -0.17101043, -0.17582754, -0.17813958, -0.1646518 , -0.13754441, -0.10192327, -0.06185314, -0.02091555,  0.01845655,  0.05523204,  0.08148251,  0.0809259 ,  0.07791638,  0.07382467,  0.07008292,  0.06643066,  0.06259476,  0.05857076,  0.0557924 ,  0.05301947,  0.05002553,  0.04777747,  0.04711573,  0.04645398,  0.04579224,  0.04513049,  0.04446874,  0.043807  ,  0.04314525,  0.04129261,  0.03885303,  0.03641344,  0.03397385,  0.03153427,  0.02863283,  0.02243762,  0.01575227,  0.00762534, -0.00333016, -0.01704594, -0.03560282};
float SS_servo3[] = { 0.20849977,  0.18686048,  0.14744366,  0.09799394,  0.08590605,  0.08302684,  0.08014762,  0.07478743,  0.06863033,  0.06247323,  0.05631613,  0.05015903,  0.04400193,  0.03784483,  0.03168773,  0.02553063,  0.02069325,  0.03210914,  0.04352503,  0.05494092,  0.06635681,  0.0777727 ,  0.08918858,  0.10151285,  0.13016416,  0.16360025,  0.20800527,  0.26401826,  0.32765856,  0.40511858,  0.47073618,  0.4753893 ,  0.44820454,  0.41354569,  0.38234618,  0.35572171,  0.32959298,  0.29993747,  0.26172608,  0.22013837,  0.17531614,  0.12409898,  0.06952986,  0.00477845, -0.05997297, -0.12472439, -0.16783794, -0.15633608, -0.14483423, -0.13333237, -0.12183052, -0.11032866, -0.09882681, -0.08732495, -0.0758231 , -0.06432124, -0.05281939, -0.04131753, -0.02981568, -0.01831382,  0.01322882,  0.06995595,  0.12668309,  0.18341022,  0.24013735,  0.29686449,  0.35359162,  0.41031875,  0.46704589,  0.52377302,  0.57300249,  0.58141487,  0.54379854,  0.48334606,  0.40618666,  0.32514633,  0.24665441,  0.166546  ,  0.10371489,  0.08924004,  0.08766564,  0.09021109,  0.09309206,  0.09607903,  0.09891591,  0.10044207,  0.09959558,  0.09894578,  0.09877353,  0.09804452,  0.09613142,  0.09421832,  0.09230522,  0.09039213,  0.08847903,  0.08656593,  0.08465284,  0.08602378,  0.08901331,  0.09200285,  0.09499238,  0.09798191,  0.1014988 ,  0.11007706,  0.12009006,  0.13230673,  0.14760619,  0.16743227,  0.19295691};
float SS_servo4[] = { 0.29620789,  0.27827644,  0.25759526,  0.23736663,  0.22330838,  0.21008354,  0.19685871,  0.18827642,  0.18118537,  0.17409431,  0.16700325,  0.15991219,  0.15282114,  0.14573008,  0.13863902,  0.13154797,  0.12503009,  0.12557129,  0.12611249,  0.12665369,  0.12719489,  0.12773609,  0.12827729,  0.12902153,  0.13365972,  0.13944104,  0.14626831,  0.15317468,  0.15989898,  0.16506345,  0.17043741,  0.17276849,  0.17408543,  0.17027107,  0.1519333 ,  0.12639888,  0.10369061,  0.08374628,  0.06521302,  0.05177245,  0.04011238,  0.01996471,  0.00715567, -0.00068004, -0.00851575, -0.01635145, -0.02400301, -0.03118975, -0.03837648, -0.04556322, -0.05274996, -0.0599367 , -0.06712344, -0.07431017, -0.08149691, -0.08868365, -0.09587039, -0.10305713, -0.11024386, -0.1174306 , -0.12336712, -0.12773252, -0.13209793, -0.13646334, -0.14082875, -0.14519415, -0.14955956, -0.15392497, -0.15829038, -0.16265578, -0.16703315, -0.17144764, -0.17892516, -0.18472678, -0.18997507, -0.19277723, -0.19473347, -0.20266105, -0.2165081 , -0.22875528, -0.22903542, -0.21888605, -0.1999605 , -0.17542231, -0.14978135, -0.12076237, -0.08915119, -0.05310001, -0.01592281,  0.01880508,  0.04832399,  0.07784289,  0.1073618 ,  0.13688071,  0.16639962,  0.19591853,  0.22543744,  0.24210116,  0.25242903,  0.26275689,  0.27308476,  0.28341262,  0.29207238,  0.28662243,  0.27881272,  0.26854818,  0.26484903,  0.2729956 ,  0.28838588};
float SS_servo5[] = {-0.18453058, -0.16219505, -0.14055513, -0.11614921, -0.10118192, -0.08830933, -0.07543674, -0.07003105, -0.0670238 , -0.06401654, -0.06100929, -0.05800203, -0.05499477, -0.05198752, -0.04898026, -0.04597301, -0.0439665 , -0.0542849 , -0.0646033 , -0.07492169, -0.08524009, -0.09555849, -0.10587688, -0.11657967, -0.1352789 , -0.15719705, -0.17972617, -0.20128756, -0.22018029, -0.23429577, -0.24319022, -0.26564679, -0.28533525, -0.29751088, -0.27587058, -0.23642583, -0.20148835, -0.1729173 , -0.15000456, -0.13576414, -0.12504936, -0.09846436, -0.08769777, -0.08805085, -0.08840393, -0.088757  , -0.08830621, -0.08582639, -0.08334657, -0.08086675, -0.07838694, -0.07590712, -0.0734273 , -0.07094748, -0.06846766, -0.06598784, -0.06350802, -0.0610282 , -0.05854838, -0.05606857, -0.05729254, -0.06317094, -0.06904934, -0.07492774, -0.08080614, -0.08668454, -0.09256294, -0.09844134, -0.10431974, -0.11019814, -0.11816366, -0.12349   , -0.12443686, -0.12546441, -0.1286525 , -0.13619235, -0.14343662, -0.13829545, -0.1217908 , -0.11346554, -0.1212635 , -0.14815649, -0.19144853, -0.24303351, -0.29263274, -0.34856103, -0.40796844, -0.47131784, -0.53550296, -0.58419307, -0.59992971, -0.61566634, -0.63140297, -0.64713961, -0.66287624, -0.67861288, -0.69434951, -0.66533863, -0.61427329, -0.56320794, -0.5121426 , -0.46107726, -0.40550976, -0.31739159, -0.23030625, -0.14827116, -0.10425191, -0.11517054, -0.15616117};
float SS_servo6[] = { 0.28941533,  0.28011455,  0.26105955,  0.23775055,  0.21863193,  0.2007701 ,  0.18290828,  0.17005199,  0.15880351,  0.14755504,  0.13630657,  0.1250581 ,  0.11380963,  0.10256115,  0.09131268,  0.08006421,  0.06882946,  0.05776371,  0.04669796,  0.03563221,  0.02456646,  0.01350071,  0.00243496, -0.00877555, -0.02142135, -0.03260285, -0.03954591, -0.04470332, -0.04924727, -0.05352527, -0.05581061, -0.06527837, -0.07175461, -0.08081145, -0.07448392, -0.05254796, -0.02220123,  0.01253171,  0.04594876,  0.07551065,  0.0981392 ,  0.11145294,  0.10714325,  0.09971551,  0.09228777,  0.08486003,  0.08122192,  0.08714905,  0.09307618,  0.09900331,  0.10493044,  0.11085757,  0.11678469,  0.12271182,  0.12863895,  0.13456608,  0.14049321,  0.14642034,  0.15234747,  0.1582746 ,  0.16540237,  0.17403894,  0.18267551,  0.19131208,  0.19994864,  0.20858521,  0.21722178,  0.22585835,  0.23449492,  0.24313148,  0.24992338,  0.26454972,  0.28300491,  0.30113226,  0.31802091,  0.33190562,  0.34417905,  0.35602093,  0.36301173,  0.34997869,  0.32826409,  0.3016156 ,  0.2728666 ,  0.24314852,  0.21389958,  0.18839976,  0.16449058,  0.15370064,  0.14725261,  0.14131537,  0.13646446,  0.13161355,  0.12676264,  0.12191173,  0.11706082,  0.11220991,  0.107359  ,  0.10897141,  0.11376937,  0.11856733,  0.12336529,  0.12816325,  0.13318717,  0.14290227,  0.15557969,  0.17311885,  0.19646234,  0.2300949 ,  0.26745917};
float SS_servo7[] = {-0.45262758, -0.44688143, -0.42838346, -0.39800962, -0.37315309, -0.35119766, -0.32924222, -0.31545608, -0.30429399, -0.2931319 , -0.28196981, -0.27080772, -0.25964564, -0.24848355, -0.23732146, -0.22615937, -0.21490277, -0.20248218, -0.19006159, -0.17764101, -0.16522042, -0.15279984, -0.14037925, -0.12766274, -0.11254461, -0.10130791, -0.09700131, -0.09507206, -0.0920276 , -0.08773677, -0.08172749, -0.08115803, -0.0856366 , -0.08746737, -0.11437939, -0.17145026, -0.24577204, -0.32727058, -0.40457617, -0.46428446, -0.49877735, -0.5018343 , -0.44171276, -0.37000747, -0.29830218, -0.22659689, -0.16848127, -0.14466689, -0.1208525 , -0.09703811, -0.07322373, -0.04940934, -0.02559495, -0.00178057,  0.02203382,  0.04584821,  0.06966259,  0.09347698,  0.11729137,  0.14110575,  0.14252696,  0.11580753,  0.08908809,  0.06236866,  0.03564923,  0.00892979, -0.01778964, -0.04450908, -0.07122851, -0.09794794, -0.12492513, -0.16694265, -0.21779163, -0.26463159, -0.30997567, -0.34893908, -0.38281397, -0.41530953, -0.43893281, -0.42947027, -0.39557871, -0.3501083 , -0.29939941, -0.24630905, -0.19441219, -0.15127845, -0.11106447, -0.0960785 , -0.08948215, -0.08300425, -0.07677825, -0.07055225, -0.06432625, -0.05810025, -0.05187425, -0.04564825, -0.03942225, -0.04486382, -0.05605591, -0.067248  , -0.0784401 , -0.08963219, -0.10163481, -0.12417228, -0.15201941, -0.18989891, -0.24151658, -0.31383884, -0.39699514};

int node=0;
int first=0;
int input=0;
int end_time=0;
int time_step=100000;
int steps = sizeof(SS_servo0)/sizeof(SS_servo0[0]);
int one_print = 0;

// -------------------Joint configurations-------------------
int servo0=0;
int servo0_deg=0;
int servo1=0;
int servo1_deg=0;
int servo2=0;
int servo2_deg=0;
int servo3=0;
int servo3_deg=0;
int servo4=0;
int servo4_deg=0;
int servo5=0;
int servo5_deg=0;
int servo6=0;
int servo6_deg=0;
int servo7=0;
int servo7_deg=0;

void setup() {
  Serial.begin(115200);
  pca9685.begin();

  pca9685.setOscillatorFrequency(27000000); //Value between 24MHz and 27MHz, tuned for this setup
  pca9685.setPWMFreq(SERVO_FREQ);
  delay (1000);

  servo0_deg=SS_servo0[0]/3.14159265*180;
        servo0=map(servo0_deg,-38,90,2200,1030);
        servo1_deg=SS_servo1[0]/3.14159265*180;
        servo1=map(servo1_deg,-90,90,2600,950);
        servo2_deg=SS_servo2[0]/3.14159265*180;
        servo2=map(servo2_deg,-37,90,1500,2670);
        servo3_deg=SS_servo3[0]/3.14159265*180;
        servo3=map(servo3_deg,-90,90,1100,2700);
        servo4_deg=SS_servo4[0]/3.14159265*180;
        servo4=map(servo4_deg,-90,38,2700,1500);
        servo5_deg=SS_servo5[0]/3.14159265*180;
        servo5=map(servo5_deg,-90,90,2600,930);
        servo6_deg=SS_servo6[0]/3.14159265*180;
        servo6=map(servo6_deg,-90,38,850,2250);
        servo7_deg=SS_servo7[0]/3.14159265*180;
        servo7=map(servo7_deg,-90,90,920,2620);
        
        pca9685.setPWM(SER0,0,servo0);
        pca9685.setPWM(SER1,0,servo1);
        pca9685.setPWM(SER2,0,servo2);
        pca9685.setPWM(SER3,0,servo3);
        pca9685.setPWM(SER4,0,servo4);
        pca9685.setPWM(SER5,0,servo5);
        pca9685.setPWM(SER6,0,servo6);
        pca9685.setPWM(SER7,0,servo7);

        Serial.print("Node:");
        Serial.println(node);
        Serial.print("servo0 -> rads:");
        Serial.print(SS_servo0[node]);
        Serial.print("        deg:");
        Serial.print(servo0_deg);
        Serial.print("        us:");
        Serial.println(servo0);
        Serial.print("servo1 -> rads:");
        Serial.print(SS_servo1[node]);
        Serial.print("        deg:");
        Serial.print(servo1_deg);
        Serial.print("        us:");
        Serial.println(servo1);
        Serial.print("servo2 -> rads:");
        Serial.print(SS_servo2[node]);
        Serial.print("        deg:");
        Serial.print(servo2_deg);
        Serial.print("        us:");
        Serial.println(servo2);
        Serial.print("servo3 -> rads:");
        Serial.print(SS_servo3[node]);
        Serial.print("        deg:");
        Serial.print(servo3_deg);
        Serial.print("        us:");
        Serial.println(servo3);
        Serial.print("servo4 -> rads:");
        Serial.print(SS_servo4[node]);
        Serial.print("        deg:");
        Serial.print(servo4_deg);
        Serial.print("        us:");
        Serial.println(servo4);
        Serial.print("servo5 -> rads:");
        Serial.print(SS_servo5[node]);
        Serial.print("        deg:");
        Serial.print(servo5_deg);
        Serial.print("        us:");
        Serial.println(servo5);
        Serial.print("servo6 -> rads:");
        Serial.print(SS_servo6[node]);
        Serial.print("        deg:");
        Serial.print(servo6_deg);
        Serial.print("        us:");
        Serial.println(servo6);
        Serial.print("servo7 -> rads:");
        Serial.print(SS_servo7[node]);
        Serial.print("        deg:");
        Serial.print(servo7_deg);
        Serial.print("        us:");
        Serial.println(servo7);

        Serial.println("10");
        delay(1000);
        Serial.println("9");
        delay(1000);
        Serial.println("8");
        delay(1000);
        Serial.println("7");
        delay(1000);
        Serial.println("6");
        delay(1000);
        Serial.println("5");
        delay(1000);
        Serial.println("4");
        delay(1000);
        Serial.println("3");
        delay(1000);
        Serial.println("2");
        delay(1000);
        Serial.println("1");
        delay(1000);

}

void loop() 
{
  if(Serial.available()>0)
  {
    first=Serial.read();
    if(first=='2')
    {
      input=2;
      node=0;
      one_print=1;
    }
    if(first=='1')
    {
      input=1;
      node=0;
      one_print=1;
    }
    if(first=='0')
    {
      input=0;
    }
  }
  if(input==1 or input==2)
  {
      if(esp_timer_get_time()>=end_time)
      {
        servo0_deg=SS_servo0[node]/3.14159265*180;
        servo0=map(servo0_deg,-38,90,2200,1030);
        servo1_deg=SS_servo1[node]/3.14159265*180;
        servo1=map(servo1_deg,-90,90,2600,950);
        servo2_deg=SS_servo2[node]/3.14159265*180;
        servo2=map(servo2_deg,-37,90,1500,2670);
        servo3_deg=SS_servo3[node]/3.14159265*180;
        servo3=map(servo3_deg,-90,90,1100,2700);
        servo4_deg=SS_servo4[node]/3.14159265*180;
        servo4=map(servo4_deg,-90,38,2700,1500);
        servo5_deg=SS_servo5[node]/3.14159265*180;
        servo5=map(servo5_deg,-90,90,2600,930);
        servo6_deg=SS_servo6[node]/3.14159265*180;
        servo6=map(servo6_deg,-90,38,850,2250);
        servo7_deg=SS_servo7[node]/3.14159265*180;
        servo7=map(servo7_deg,-90,90,920,2620);
        
        pca9685.setPWM(SER0,0,servo0);
        pca9685.setPWM(SER1,0,servo1);
        pca9685.setPWM(SER2,0,servo2);
        pca9685.setPWM(SER3,0,servo3);
        pca9685.setPWM(SER4,0,servo4);
        pca9685.setPWM(SER5,0,servo5);
        pca9685.setPWM(SER6,0,servo6);
        pca9685.setPWM(SER7,0,servo7);
        
        node+=1;
        if(node>=steps and input==1)
        {
          Serial.print("Input:");
          Serial.println(input);
          node=0;
        }
        if(node>=steps and input==2)
        {
          Serial.print("Input:");
          Serial.println(input);
          input=0;
        }
         end_time=esp_timer_get_time()+time_step;
      }
   }

  if(input == 0)
  {        
        pca9685.setPWM(SER0,0,servo0);
        pca9685.setPWM(SER1,0,servo1);
        pca9685.setPWM(SER2,0,servo2);
        pca9685.setPWM(SER3,0,servo3);
        pca9685.setPWM(SER4,0,servo4);
        pca9685.setPWM(SER5,0,servo5);
        pca9685.setPWM(SER6,0,servo6);
        pca9685.setPWM(SER7,0,servo7);

        if(one_print==1)
        {
          Serial.print("Input:");
          Serial.println(input);
          Serial.print("Node:");
          Serial.println(node);
          Serial.print("servo0 -> rads:");
          Serial.print(SS_servo0[node]);
          Serial.print("        deg:");
          Serial.print(servo0_deg);
          Serial.print("        us:");
          Serial.println(servo0);
          Serial.print("servo1 -> rads:");
          Serial.print(SS_servo1[node]);
          Serial.print("        deg:");
          Serial.print(servo1_deg);
          Serial.print("        us:");
          Serial.println(servo1);
          Serial.print("servo2 -> rads:");
          Serial.print(SS_servo2[node]);
          Serial.print("        deg:");
          Serial.print(servo2_deg);
          Serial.print("        us:");
          Serial.println(servo2);
          Serial.print("servo3 -> rads:");
          Serial.print(SS_servo3[node]);
          Serial.print("        deg:");
          Serial.print(servo3_deg);
          Serial.print("        us:");
          Serial.println(servo3);
          Serial.print("servo4 -> rads:");
          Serial.print(SS_servo4[node]);
          Serial.print("        deg:");
          Serial.print(servo4_deg);
          Serial.print("        us:");
          Serial.println(servo4);
          Serial.print("servo5 -> rads:");
          Serial.print(SS_servo5[node]);
          Serial.print("        deg:");
          Serial.print(servo5_deg);
          Serial.print("        us:");
          Serial.println(servo5);
          Serial.print("servo6 -> rads:");
          Serial.print(SS_servo6[node]);
          Serial.print("        deg:");
          Serial.print(servo6_deg);
          Serial.print("        us:");
          Serial.println(servo6);
          Serial.print("servo7 -> rads:");
          Serial.print(SS_servo7[node]);
          Serial.print("        deg:");
          Serial.print(servo7_deg);
          Serial.print("        us:");
          Serial.println(servo7);
          one_print=0;
        }
  
  }
}
