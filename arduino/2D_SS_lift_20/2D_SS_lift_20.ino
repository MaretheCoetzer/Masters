// HOW TO:
// ------------------------------
// Serial input = 2 -> Steps through gait sequence once and stops at the end.
// Serial input = 1 -> Steps through gait sequence in a loop.
// Serial input = 0 -> Stops infinite loop at the node where it is at that moment

//Gait template
#include <Wire.h>
#include <Adafruit_PWMServoDriver.h>

Adafruit_PWMServoDriver pca9685 = Adafruit_PWMServoDriver();

#define SERVO_FREQ 300
#define SER0 0 //Hip 1
#define SER1 1 //Knee 1
#define SER2 2 //Hip 2
#define SER3 3 //Knee 2
#define SER4 4 //Hip 3
#define SER5 5 //Knee 3
#define SER6 6 //Hip 4
#define SER7 7 //Knee 4

// Insert servo angles here:
// For 3D gaits, these angles are obtained from linearisation.py
// For 2D gaits, these angles are obtained from 2D_trajectory_reader.py
float SS_servo0[] = {-0.18155767, -0.16117205, -0.13333385, -0.10745499, -0.08240596, -0.05745628, -0.0292491 ,  0.0031598 ,  0.04105073,  0.08421688,  0.13416671,  0.18677324,  0.23777975,  0.28671538,  0.33311417,  0.37170696,  0.3969686 ,  0.41198279,  0.40902765,  0.38543582,  0.3598072 ,  0.34631956,  0.34734468,  0.35498951,  0.35917786,  0.35913893,  0.35414388,  0.34914884,  0.34219277,  0.33264184,  0.32227523,  0.31129166,  0.30053023,  0.28934776,  0.2872143 ,  0.28665002,  0.27813678,  0.26962354,  0.2611103 ,  0.25259706,  0.24737944,  0.2424884 ,  0.23759737,  0.23270633,  0.2278153 ,  0.22292426,  0.21803323,  0.21314219,  0.20825116,  0.20336013,  0.19846909,  0.19357806,  0.18868702,  0.18379599,  0.17798311,  0.16877075,  0.15955839,  0.15034603,  0.14113367,  0.13192131,  0.12270895,  0.11349659,  0.10428423,  0.09507187,  0.08585951,  0.07471802,  0.06603309,  0.05907372,  0.05109282,  0.04392642,  0.0413765 ,  0.03284562,  0.0234553 ,  0.01237333, -0.00082081, -0.01927218, -0.04031763, -0.04923822, -0.04734038, -0.04379816, -0.04390548, -0.04464155, -0.04647451, -0.04940478, -0.0532268 , -0.05755172, -0.06078091, -0.06616801, -0.07159108, -0.07700073, -0.08212354, -0.08724635, -0.08821215, -0.08931558, -0.09208342, -0.09485125, -0.09761909, -0.10038693, -0.10315476, -0.1077871 , -0.11250948, -0.11723186, -0.12204541, -0.1294237 , -0.13871227, -0.14983147, -0.15688608, -0.16146304, -0.16624615};
float SS_servo1[] = {0.0636676 , 0.11201358, 0.19915266, 0.27989743, 0.35478474, 0.42611943, 0.48055772, 0.51502505, 0.52184713, 0.50229117, 0.44835878, 0.37652389, 0.30123906, 0.22583207, 0.15452019, 0.11213438, 0.10380189, 0.12705575, 0.16293619, 0.19118093, 0.22100311, 0.22804243, 0.20784817, 0.17406111, 0.15071525, 0.13501632, 0.13095963, 0.12690293, 0.12761583, 0.13463996, 0.14233272, 0.14756423, 0.15359491, 0.15829247, 0.14554909, 0.12736349, 0.12329099, 0.11921849, 0.11514599, 0.11107349, 0.10673398, 0.102368  , 0.09800203, 0.09363605, 0.08927008, 0.0849041 , 0.08053813, 0.07617215, 0.07180618, 0.06744021, 0.06307423, 0.05870826, 0.05434228, 0.04997631, 0.04723258, 0.05047124, 0.05370991, 0.05694857, 0.06018723, 0.0634259 , 0.06666456, 0.06990323, 0.07314189, 0.07638055, 0.07961922, 0.08467515, 0.0851564 , 0.08257695, 0.0804519 , 0.07678768, 0.06684644, 0.06526686, 0.06517068, 0.06894458, 0.07755057, 0.09413396, 0.11637996, 0.11435031, 0.09518294, 0.08312514, 0.07953645, 0.07853921, 0.07958518, 0.08243786, 0.08547364, 0.08865002, 0.08814151, 0.09016561, 0.0922353 , 0.09425881, 0.09529499, 0.09633117, 0.09024386, 0.08503514, 0.08470439, 0.08437364, 0.0840429 , 0.08371215, 0.08338141, 0.08649459, 0.08977407, 0.09305356, 0.09635473, 0.10037124, 0.10423865, 0.10576064, 0.09397865, 0.07369829, 0.04871591};   
float SS_servo2[] = {-0.15902748, -0.16880238, -0.1732448 , -0.17294076, -0.17096188, -0.16989848, -0.17111443, -0.17477394, -0.182462  , -0.19402525, -0.2112928 , -0.23483893, -0.26547542, -0.30210342, -0.34496346, -0.39237428, -0.44076268, -0.48516453, -0.51927872, -0.52693734, -0.52800819, -0.52276576, -0.50997675, -0.49715149, -0.48818136, -0.48594725, -0.4760251 , -0.46610294, -0.45596101, -0.44552828, -0.43593533, -0.42548161, -0.41252694, -0.39398934, -0.36068243, -0.32457584, -0.285522  , -0.24646815, -0.20741431, -0.16836046, -0.16385488, -0.16277299, -0.16169111, -0.16060922, -0.15952734, -0.15844545, -0.15736357, -0.15628168, -0.1551998 , -0.15411791, -0.15303603, -0.15195414, -0.15087226, -0.14979037, -0.15277809, -0.17077333, -0.18876858, -0.20676382, -0.22475906, -0.2427543 , -0.26074955, -0.27874479, -0.29674003, -0.31473528, -0.33273052, -0.34662281, -0.34729149, -0.33709328, -0.31745891, -0.28877787, -0.25251166, -0.21302759, -0.17319971, -0.13479658, -0.09817238, -0.06431969, -0.03201048, -0.0097429 , -0.00717687, -0.01146182, -0.0161526 , -0.01992063, -0.02352129, -0.02710829, -0.0312208 , -0.03560236, -0.04199617, -0.04633925, -0.05064698, -0.05499188, -0.06013137, -0.06527087, -0.07199603, -0.07828763, -0.08274327, -0.08719891, -0.09165455, -0.09611019, -0.10056582, -0.10440165, -0.10820755, -0.11201346, -0.11584437, -0.11987937, -0.12414443, -0.12936086, -0.13990232, -0.15367407, -0.16540327};
float SS_servo3[] = { 0.04190516,  0.05880194,  0.06719208,  0.06757047,  0.06564022,  0.06557706,  0.06934318,  0.0766861 ,  0.09058443,  0.11090455,  0.14073886,  0.18222925,  0.23687449,  0.30298951,  0.38234232,  0.47564975,  0.5696449 ,  0.6588013 ,  0.72178644,  0.7183441 ,  0.70056375,  0.67286466,  0.63330915,  0.59323244,  0.56312899,  0.54449899,  0.51318914,  0.48187929,  0.45091506,  0.42040817,  0.39046421,  0.35523071,  0.31636521,  0.26468195,  0.18508955,  0.08604238, -0.02909741, -0.1442372 , -0.25937699, -0.37451678, -0.36733404, -0.34802926, -0.32872448, -0.3094197 , -0.29011492, -0.27081013, -0.25150535, -0.23220057, -0.21289579, -0.19359101, -0.17428623, -0.15498145, -0.13567667, -0.11637189, -0.08237142,  0.00582251,  0.09401643,  0.18221036,  0.27040428,  0.3585982 ,  0.44679213,  0.53498605,  0.62317998,  0.7113739 ,  0.79956783,  0.87516176,  0.91191306,  0.91379169,  0.88103327,  0.81557919,  0.72307727,  0.61405182,  0.50388316,  0.40019358,  0.30459365,  0.21368137,  0.12935866,  0.06582041,  0.05309539,  0.06269277,  0.06813194,  0.07308586,  0.07761284,  0.08175044,  0.08537303,  0.08867762,  0.09435997,  0.09434615,  0.0942385 ,  0.09418373,  0.0952594 ,  0.09633507,  0.10149948,  0.10643281,  0.10942744,  0.11242208,  0.11541672,  0.11841136,  0.12140599,  0.12298494,  0.12449553,  0.12600612,  0.12740537,  0.12490967,  0.11899638,  0.109017  ,  0.10403193,  0.10168663,  0.09024184};
float SS_servo4[] = { 5.02756671e-01,  4.91062098e-01,  4.73436783e-01,  4.52131752e-01,  4.27383812e-01,  4.00870231e-01,  3.72635356e-01,  3.44482923e-01,  3.16012637e-01,  2.87240070e-01,  2.60003293e-01,  2.37488886e-01,  2.16719838e-01,  1.96178077e-01,  1.74781731e-01,  1.52098153e-01,  1.32465967e-01,  1.18317674e-01,  1.10485820e-01,  1.05312896e-01,  9.96545656e-02,  8.93520477e-02,  7.34980805e-02,  5.10847927e-02,  3.39131528e-02,  1.98990332e-02,  1.18072864e-02,  3.71553962e-03, -1.40505225e-03, -2.59415441e-03, -4.23160184e-03, -1.02880300e-02, -1.40400732e-02, -2.00116297e-02, -3.16255418e-02, -4.36070308e-02, -5.27382959e-02, -6.18695611e-02, -7.10008263e-02, -8.01320915e-02, -8.76479293e-02, -9.50036798e-02, -1.02359430e-01, -1.09715181e-01, -1.17070931e-01, -1.24426682e-01, -1.31782432e-01, -1.39138183e-01, -1.46493933e-01, -1.53849684e-01, -1.61205434e-01, -1.68561185e-01, -1.75916935e-01, -1.83272686e-01, -1.90210515e-01, -1.95607174e-01, -2.01003832e-01, -2.06400491e-01, -2.11797150e-01, -2.17193808e-01, -2.22590467e-01, -2.27987125e-01, -2.33383784e-01, -2.38780442e-01, -2.44177101e-01, -2.49321553e-01, -2.53392773e-01, -2.56862328e-01, -2.59661634e-01, -2.59757128e-01, -2.55754256e-01, -2.55611771e-01, -2.55753346e-01, -2.56214194e-01, -2.57073678e-01, -2.63552041e-01, -2.80652916e-01, -3.20703226e-01, -3.61185455e-01, -3.75782609e-01, -3.80957128e-01, -3.83402379e-01, -3.85355546e-01, -3.86947686e-01, -3.87831561e-01, -3.87459956e-01, -3.86409989e-01, -3.87817725e-01, -3.89264933e-01, -3.90798672e-01, -3.94182096e-01, -3.97565520e-01, -3.96004770e-01, -3.86921696e-01, -3.55592509e-01, -3.24263323e-01, -2.92934136e-01, -2.61604950e-01, -2.30275763e-01, -1.73980730e-01, -1.16480097e-01, -5.89794638e-02, -5.00967225e-04,  6.78773492e-02,  1.39042513e-01,  2.13796563e-01,  2.90067404e-01,  3.66528280e-01,  4.43939654e-01};
float SS_servo5[] = {-0.86011555, -0.84097987, -0.80885322, -0.76845647, -0.72033921, -0.66857522, -0.61382336, -0.56015449, -0.50685964, -0.4538455 , -0.40506375, -0.36566382, -0.32984857, -0.29409781, -0.25472258, -0.20642938, -0.16413595, -0.12916605, -0.11300606, -0.12020232, -0.12894941, -0.12705983, -0.11245568, -0.0853223 , -0.06545596, -0.05260679, -0.04985477, -0.04710275, -0.04939309, -0.0583556 , -0.06734624, -0.07120995, -0.0784571 , -0.08343398, -0.07671542, -0.07164156, -0.07393275, -0.07622395, -0.07851514, -0.08080634, -0.08034844, -0.07961811, -0.07888778, -0.07815745, -0.07742712, -0.07669679, -0.07596646, -0.07523613, -0.0745058 , -0.07377547, -0.07304513, -0.0723148 , -0.07158447, -0.07085414, -0.07125467, -0.07582547, -0.08039627, -0.08496706, -0.08953786, -0.09410866, -0.09867946, -0.10325026, -0.10782106, -0.11239185, -0.11696265, -0.12415522, -0.13329429, -0.14330953, -0.1563305 , -0.17479763, -0.19867405, -0.2185245 , -0.23805516, -0.25649386, -0.27356916, -0.28183069, -0.2679843 , -0.20813093, -0.14822794, -0.13558108, -0.1392226 , -0.14093272, -0.14168755, -0.14278044, -0.14731118, -0.15633245, -0.16955154, -0.16753272, -0.16526799, -0.16185645, -0.13393033, -0.10600422, -0.0745921 , -0.0543304 , -0.07024577, -0.08616115, -0.10207653, -0.1179919 , -0.13390728, -0.18400068, -0.23574453, -0.28748839, -0.34015462, -0.40692411, -0.48137995, -0.56502058, -0.645432  , -0.72338614, -0.7992792 };
float SS_servo6[] = { 0.43620316,  0.42676327,  0.40826803,  0.38635633,  0.36126162,  0.33436926,  0.30560183,  0.27668923,  0.24698422,  0.21702576,  0.18732017,  0.15799482,  0.13022216,  0.10461609,  0.08340954,  0.07655548,  0.06122409,  0.04170759,  0.0177843 ,  0.00183416, -0.00978806, -0.0133004 , -0.00711856,  0.00843456,  0.03469284,  0.06454872,  0.09844719,  0.13234566,  0.16658622,  0.20127944,  0.23393992,  0.2585474 ,  0.27547688,  0.28725753,  0.29622387,  0.28359823,  0.25994017,  0.2362821 ,  0.21262403,  0.18896596,  0.18499437,  0.1829737 ,  0.18095302,  0.17893234,  0.17691167,  0.17489099,  0.17287032,  0.17084964,  0.16882896,  0.16680829,  0.16478761,  0.16276693,  0.16074626,  0.15872558,  0.1603816 ,  0.17559619,  0.19081078,  0.20602537,  0.22123997,  0.23645456,  0.25166915,  0.26688374,  0.28209834,  0.29731293,  0.31252752,  0.32805388,  0.34877023,  0.37195548,  0.3932646 ,  0.41179971,  0.42780117,  0.43956716,  0.4505477 ,  0.46101613,  0.47084514,  0.48060816,  0.48742676,  0.48403529,  0.46489301,  0.44070989,  0.41233275,  0.38142581,  0.34975298,  0.31704668,  0.28604078,  0.25573367,  0.22823742,  0.20956812,  0.19103472,  0.17277534,  0.16037328,  0.14797122,  0.14258831,  0.13806372,  0.13416665,  0.13026957,  0.12637249,  0.12247542,  0.11857834,  0.13376594,  0.14987515,  0.16598435,  0.18414595,  0.21754674,  0.25073402,  0.28580119,  0.32844372,  0.36878188,  0.40794464};
float SS_servo7[] = {-0.90082371, -0.88537364, -0.85070607, -0.80806911, -0.758073  , -0.70434837, -0.6473508 , -0.59109853, -0.53439919, -0.47815715, -0.42379427, -0.37048227, -0.32045908, -0.27436327, -0.2350419 , -0.21866713, -0.16250881, -0.09300131, -0.03053151, -0.01656368, -0.01364733, -0.02520495, -0.05406411, -0.10853192, -0.19202263, -0.28767904, -0.38568325, -0.48368747, -0.57773612, -0.66655071, -0.74762628, -0.8025551 , -0.82732828, -0.83573572, -0.83154773, -0.75685281, -0.64495191, -0.533051  , -0.42115009, -0.30924918, -0.25866679, -0.21416101, -0.16965523, -0.12514946, -0.08064368, -0.0361379 ,  0.00836788,  0.05287366,  0.09737944,  0.14188522,  0.18639099,  0.23089677,  0.27540255,  0.31990833,  0.34542887,  0.3009373 ,  0.25644574,  0.21195418,  0.16746262,  0.12297106,  0.07847949,  0.03398793, -0.01050363, -0.05499519, -0.09948676, -0.14648111, -0.20282743, -0.26313578, -0.32108152, -0.3734748 , -0.41813556, -0.45811195, -0.49679832, -0.53394018, -0.56915358, -0.60657616, -0.638057  , -0.65120482, -0.6313638 , -0.59175085, -0.54273073, -0.48723092, -0.43002556, -0.37079125, -0.31600171, -0.26314069, -0.21688678, -0.18926937, -0.16193808, -0.13515204, -0.12002131, -0.10489059, -0.102339  , -0.10086526, -0.09906509, -0.09726491, -0.09546474, -0.09366456, -0.09186438, -0.12735375, -0.16464382, -0.2019339 , -0.2433574 , -0.3185265 , -0.39709065, -0.48509592, -0.5929405 , -0.70002399, -0.8099482 };

int node=0;
int first=0;
int input=0;
int end_time=0;
int time_step=100000;
int steps = sizeof(SS_servo0)/sizeof(SS_servo0[0]);
int one_print = 0;

// -------------------Joint configurations-------------------
int servo0=0;
int servo0_deg=0;
int servo1=0;
int servo1_deg=0;
int servo2=0;
int servo2_deg=0;
int servo3=0;
int servo3_deg=0;
int servo4=0;
int servo4_deg=0;
int servo5=0;
int servo5_deg=0;
int servo6=0;
int servo6_deg=0;
int servo7=0;
int servo7_deg=0;

void setup() {
  Serial.begin(115200);
  pca9685.begin();

  pca9685.setOscillatorFrequency(27000000); //Value between 24MHz and 27MHz, tuned for this setup
  pca9685.setPWMFreq(SERVO_FREQ);
  delay (1000);

  servo0_deg=SS_servo0[0]/3.14159265*180;
        servo0=map(servo0_deg,-38,90,2200,1030);
        servo1_deg=SS_servo1[0]/3.14159265*180;
        servo1=map(servo1_deg,-90,90,2600,950);
        servo2_deg=SS_servo2[0]/3.14159265*180;
        servo2=map(servo2_deg,-37,90,1500,2670);
        servo3_deg=SS_servo3[0]/3.14159265*180;
        servo3=map(servo3_deg,-90,90,1100,2700);
        servo4_deg=SS_servo4[0]/3.14159265*180;
        servo4=map(servo4_deg,-90,38,2700,1500);
        servo5_deg=SS_servo5[0]/3.14159265*180;
        servo5=map(servo5_deg,-90,90,2600,930);
        servo6_deg=SS_servo6[0]/3.14159265*180;
        servo6=map(servo6_deg,-90,38,850,2250);
        servo7_deg=SS_servo7[0]/3.14159265*180;
        servo7=map(servo7_deg,-90,90,920,2620);
        
        pca9685.setPWM(SER0,0,servo0);
        pca9685.setPWM(SER1,0,servo1);
        pca9685.setPWM(SER2,0,servo2);
        pca9685.setPWM(SER3,0,servo3);
        pca9685.setPWM(SER4,0,servo4);
        pca9685.setPWM(SER5,0,servo5);
        pca9685.setPWM(SER6,0,servo6);
        pca9685.setPWM(SER7,0,servo7);

        Serial.print("Node:");
        Serial.println(node);
        Serial.print("servo0 -> rads:");
        Serial.print(SS_servo0[node]);
        Serial.print("        deg:");
        Serial.print(servo0_deg);
        Serial.print("        us:");
        Serial.println(servo0);
        Serial.print("servo1 -> rads:");
        Serial.print(SS_servo1[node]);
        Serial.print("        deg:");
        Serial.print(servo1_deg);
        Serial.print("        us:");
        Serial.println(servo1);
        Serial.print("servo2 -> rads:");
        Serial.print(SS_servo2[node]);
        Serial.print("        deg:");
        Serial.print(servo2_deg);
        Serial.print("        us:");
        Serial.println(servo2);
        Serial.print("servo3 -> rads:");
        Serial.print(SS_servo3[node]);
        Serial.print("        deg:");
        Serial.print(servo3_deg);
        Serial.print("        us:");
        Serial.println(servo3);
        Serial.print("servo4 -> rads:");
        Serial.print(SS_servo4[node]);
        Serial.print("        deg:");
        Serial.print(servo4_deg);
        Serial.print("        us:");
        Serial.println(servo4);
        Serial.print("servo5 -> rads:");
        Serial.print(SS_servo5[node]);
        Serial.print("        deg:");
        Serial.print(servo5_deg);
        Serial.print("        us:");
        Serial.println(servo5);
        Serial.print("servo6 -> rads:");
        Serial.print(SS_servo6[node]);
        Serial.print("        deg:");
        Serial.print(servo6_deg);
        Serial.print("        us:");
        Serial.println(servo6);
        Serial.print("servo7 -> rads:");
        Serial.print(SS_servo7[node]);
        Serial.print("        deg:");
        Serial.print(servo7_deg);
        Serial.print("        us:");
        Serial.println(servo7);

        Serial.println("10");
        delay(1000);
        Serial.println("9");
        delay(1000);
        Serial.println("8");
        delay(1000);
        Serial.println("7");
        delay(1000);
        Serial.println("6");
        delay(1000);
        Serial.println("5");
        delay(1000);
        Serial.println("4");
        delay(1000);
        Serial.println("3");
        delay(1000);
        Serial.println("2");
        delay(1000);
        Serial.println("1");
        delay(1000);

}

void loop() 
{
  if(Serial.available()>0)
  {
    first=Serial.read();
    if(first=='2')
    {
      input=2;
      node=0;
      one_print=1;
    }
    if(first=='1')
    {
      input=1;
      node=0;
      one_print=1;
    }
    if(first=='0')
    {
      input=0;
    }
  }
  if(input==1 or input==2)
  {
      if(esp_timer_get_time()>=end_time)
      {
        servo0_deg=SS_servo0[node]/3.14159265*180;
        servo0=map(servo0_deg,-38,90,2200,1030);
        servo1_deg=SS_servo1[node]/3.14159265*180;
        servo1=map(servo1_deg,-90,90,2600,950);
        servo2_deg=SS_servo2[node]/3.14159265*180;
        servo2=map(servo2_deg,-37,90,1500,2670);
        servo3_deg=SS_servo3[node]/3.14159265*180;
        servo3=map(servo3_deg,-90,90,1100,2700);
        servo4_deg=SS_servo4[node]/3.14159265*180;
        servo4=map(servo4_deg,-90,38,2700,1500);
        servo5_deg=SS_servo5[node]/3.14159265*180;
        servo5=map(servo5_deg,-90,90,2600,930);
        servo6_deg=SS_servo6[node]/3.14159265*180;
        servo6=map(servo6_deg,-90,38,850,2250);
        servo7_deg=SS_servo7[node]/3.14159265*180;
        servo7=map(servo7_deg,-90,90,920,2620);
        
        pca9685.setPWM(SER0,0,servo0);
        pca9685.setPWM(SER1,0,servo1);
        pca9685.setPWM(SER2,0,servo2);
        pca9685.setPWM(SER3,0,servo3);
        pca9685.setPWM(SER4,0,servo4);
        pca9685.setPWM(SER5,0,servo5);
        pca9685.setPWM(SER6,0,servo6);
        pca9685.setPWM(SER7,0,servo7);
        
        node+=1;
        if(node>=steps and input==1)
        {
          Serial.print("Input:");
          Serial.println(input);
          node=0;
        }
        if(node>=steps and input==2)
        {
          Serial.print("Input:");
          Serial.println(input);
          input=0;
        }
         end_time=esp_timer_get_time()+time_step;
      }
   }

  if(input == 0)
  {        
        pca9685.setPWM(SER0,0,servo0);
        pca9685.setPWM(SER1,0,servo1);
        pca9685.setPWM(SER2,0,servo2);
        pca9685.setPWM(SER3,0,servo3);
        pca9685.setPWM(SER4,0,servo4);
        pca9685.setPWM(SER5,0,servo5);
        pca9685.setPWM(SER6,0,servo6);
        pca9685.setPWM(SER7,0,servo7);

        if(one_print==1)
        {
          Serial.print("Input:");
          Serial.println(input);
          Serial.print("Node:");
          Serial.println(node);
          Serial.print("servo0 -> rads:");
          Serial.print(SS_servo0[node]);
          Serial.print("        deg:");
          Serial.print(servo0_deg);
          Serial.print("        us:");
          Serial.println(servo0);
          Serial.print("servo1 -> rads:");
          Serial.print(SS_servo1[node]);
          Serial.print("        deg:");
          Serial.print(servo1_deg);
          Serial.print("        us:");
          Serial.println(servo1);
          Serial.print("servo2 -> rads:");
          Serial.print(SS_servo2[node]);
          Serial.print("        deg:");
          Serial.print(servo2_deg);
          Serial.print("        us:");
          Serial.println(servo2);
          Serial.print("servo3 -> rads:");
          Serial.print(SS_servo3[node]);
          Serial.print("        deg:");
          Serial.print(servo3_deg);
          Serial.print("        us:");
          Serial.println(servo3);
          Serial.print("servo4 -> rads:");
          Serial.print(SS_servo4[node]);
          Serial.print("        deg:");
          Serial.print(servo4_deg);
          Serial.print("        us:");
          Serial.println(servo4);
          Serial.print("servo5 -> rads:");
          Serial.print(SS_servo5[node]);
          Serial.print("        deg:");
          Serial.print(servo5_deg);
          Serial.print("        us:");
          Serial.println(servo5);
          Serial.print("servo6 -> rads:");
          Serial.print(SS_servo6[node]);
          Serial.print("        deg:");
          Serial.print(servo6_deg);
          Serial.print("        us:");
          Serial.println(servo6);
          Serial.print("servo7 -> rads:");
          Serial.print(SS_servo7[node]);
          Serial.print("        deg:");
          Serial.print(servo7_deg);
          Serial.print("        us:");
          Serial.println(servo7);
          one_print=0;
        }
  
  }
}
